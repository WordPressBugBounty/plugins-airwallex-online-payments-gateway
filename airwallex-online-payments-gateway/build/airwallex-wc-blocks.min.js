(()=>{"use strict";var e={20:(e,t,n)=>{
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(609),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=window.wc.wcBlocksRegistry,a=window.wc.wcSettings,o=window.wp.i18n;var i,s,l,c,d,u=n(848);const m=(0,a.getSetting)("airwallex_main_data",{}),y=null!==(i=m?.title)&&void 0!==i?i:(0,o.__)("Pay with cards and more","airwallex-online-payments-gateway"),p=null!==(s=m?.description)&&void 0!==s?s:"",x=null!==(l=m?.icons)&&void 0!==l?l:{},w=e=>{const{PaymentMethodLabel:t}=e.components;return Object.keys(x).length<=5?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t,{text:y}),(0,u.jsx)("span",{style:{marginLeft:"auto",display:"flex",direction:"rtl"},children:Object.entries(x).map((([e,t])=>(0,u.jsx)("img",{src:t,alt:y,className:"airwallex-card-icon"},e)))})]}):(0,u.jsx)(t,{text:y})},g=e=>Object.keys(x).length>5?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"airwallex-logo-list",style:{display:"flex"},children:Object.entries(x).map((([e,t])=>(0,u.jsx)("img",{src:t,alt:y,className:"airwallex-card-icon"},e)))}),(0,u.jsx)("div",{children:p})]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{children:p})}),h={name:null!==(c=m?.name)&&void 0!==c?c:"airwallex_main",label:(0,u.jsx)(w,{}),content:(0,u.jsx)(g,{}),edit:(0,u.jsx)(g,{}),canMakePayment:()=>{var e;return null!==(e=m?.enabled)&&void 0!==e&&e},ariaLabel:y,supports:{features:null!==(d=m?.supports)&&void 0!==d?d:[]}};var v=n(609);const _={prod:"checkout.airwallex.com",demo:"checkout-demo.airwallex.com",staging:"checkout-staging.airwallex.com",dev:"checkout-dev.airwallex.com",local:"localhost:3000"},f=e=>`https://${_[e]||_.prod}`,C="/assets/elements.bundle.min.js?version=1.89.0",b=e=>{const t=document.createElement("script");t.src=`${e}${C}`,t.crossOrigin="anonymous";const n=document.head||document.body;if(!n)throw new Error("Airwallex payment scripts requires a <head> or <body> html element in order to be loaded.");return n.appendChild(t),t},j=async e=>{if("undefined"==typeof window)return null;if(window.Airwallex)return window.Airwallex;let t=0;const n=async()=>{const t=document.querySelector(`script[src="${C}"], script[src="${C}/"]`)||b(f((null==e?void 0:e.env)||"prod"));return new Promise(((n,r)=>{t.addEventListener("load",(()=>{window.Airwallex?(window.Airwallex.init(e),n(window.Airwallex)):r(new Error("Failed to load Airwallex on load event"))})),t.addEventListener("error",(()=>{r(new Error("Failed to load Airwallex scripts")),t.remove&&t.remove()}))}))};for(;t<3;)try{return await n()}catch(e){t++,await new Promise((e=>window.setTimeout(e,500)))}return null},S=(e,t)=>window.Airwallex?window.Airwallex.createElement(e,t):(console.error("Please loadAirwallex() before createElement();"),null),E=e=>window.Airwallex?window.Airwallex.getElement(e):(console.error("Please loadAirwallex() before getElement();"),null),k=async e=>{if(window.Airwallex)return window.Airwallex.confirmPaymentIntent(e);{const e="Please loadAirwallex() before confirmPaymentIntent();";throw console.error(e),new Error(e)}},M=async e=>{if(window.Airwallex)return window.Airwallex.createPaymentConsent(e);{const e="Please loadAirwallex() before createPaymentConsent();";throw console.error(e),new Error(e)}};const R=e=>e.first_name.concat(" ",e.last_name).trim(),I=e=>({address:{city:e.city,country_code:e.country,postcode:e.postcode,state:e.state,street:e.address_1.concat(" ",e.address_2).trim()},first_name:e.first_name,last_name:e.last_name,email:e.email}),N=function(e,t){for(const n in t)e=e.split(n).join(t[n]);return e};(()=>{const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))})();const P=()=>{const e=navigator.language||navigator.userLanguage,t=e.split("-")[0];return"zh"!==t||"zh-HK"!==e&&"zh-TW"!==e?t:"zh-HK"},T=({settings:e,paymentDetails:t,cvcElementRef:n,billingData:r,successType:a,errorType:o,errorContext:i})=>{const s=document.getElementById("airwallex-save")?.checked,l=e.confirm_url.includes("?")?"&":"?",c=`${e.confirm_url}${l}order_id=${t.orderId}&intent_id=${t.paymentIntent}&is_airwallex_save_checked=${s}`,d=E("card"),u={type:a};let m;if(u.confirmUrl=c,t.paymentMethodId){let a={client_secret:t.clientSecret,billing:I(r),customer_id:t.customerId,intent_id:t.paymentIntent,payment_method_id:t.paymentMethodId,payment_method_options:{card:{auto_capture:e.capture_immediately}}};t.createConsent&&(a.currency=t.currency,a.payment_consent={merchant_trigger_reason:"scheduled",next_triggered_by:"merchant"}),m=n.current.confirm(a)}else m=t.createConsent?M({intent_id:t.paymentIntent,customer_id:t.customerId,client_secret:t.clientSecret,currency:t.currency,element:d,next_triggered_by:"merchant",billing:I(r)}):s?M({intent_id:t.paymentIntent,customer_id:t.customerId,client_secret:t.clientSecret,currency:t.currency,element:d,next_triggered_by:"customer",billing:I(r)}):k({element:d,id:t.paymentIntent,client_secret:t.clientSecret,payment_method:{card:{name:R(r)},billing:I(r)}});return m.then((e=>u)).catch((e=>{var t;return u.type=o,u.code=e.code,u.message=null!==(t=e.message)&&void 0!==t?t:JSON.stringify(e),u.messageContext=i,u}))},$=({settings:e,props:t})=>{const[n,r]=(0,v.useState)(!1),[a,i]=(0,v.useState)(!1),[s,l]=(0,v.useState)(!1),[c,d]=(0,v.useState)(!1),{emitResponse:m,billing:y}=t,{ValidationInputError:p,LoadingMask:x}=t.components,{onCheckoutSuccess:w,onPaymentSetup:g,onCheckoutFail:h,onCheckoutValidation:_}=t.eventRegistration;return(0,v.useEffect)((()=>{let t={env:e.environment,origin:window.location.origin,locale:e.locale};j(t).then((()=>{Airwallex.init(t);S("card",{autoCapture:e.capture_immediately,allowedCardNetworks:["discover","visa","mastercard","maestro","unionpay","amex","jcb","diners"],style:{base:{fontSize:"14px","::placeholder":{color:"rgba(135, 142, 153, 1)"}}}}).mount("airwallex-card")}));const n=e=>{r(!0),console.log("The Card element is ready.")},a=e=>{const{error:t}=e.detail;i(t.message),console.error("There was an error",t)},o=e=>{d("")},s=e=>{var t;const{error:n}=e.detail;d(null!==(t=n?.message)&&void 0!==t?t:JSON.stringify(n))},l=document.getElementById("airwallex-card");return l.addEventListener("onReady",n),l.addEventListener("onError",a),l.addEventListener("onBlur",s),l.addEventListener("onFocus",o),()=>{l.removeEventListener("onReady",n),l.removeEventListener("onError",a),l.removeEventListener("onFocus",o),l.removeEventListener("onBlur",s)}}),[]),(0,v.useEffect)((()=>{const e=_((()=>!c||{errorMessage:(0,o.__)("An error has occurred. Please check your payment details.","airwallex-online-payments-gateway")+` (${c})`}));return()=>{e()}}),[c,_]),(0,v.useEffect)((()=>{const e=g((async()=>({type:m.responseTypes.SUCCESS,meta:{paymentMethodData:{"is-airwallex-card-block":!0}}})));return()=>{e()}}),[e,g,m.responseTypes.SUCCESS]),(0,v.useEffect)((()=>{const e=h((({processingResponse:e})=>!e?.paymentDetails?.errorMessage||{type:m.responseTypes.ERROR,message:e.paymentDetails.errorMessage,messageContext:m.noticeContexts.PAYMENTS}));return()=>{e()}}),[h,m.noticeContexts.PAYMENTS,m.responseTypes.ERROR]),(0,v.useEffect)((()=>{const t=w((async({processingResponse:t})=>{l(!0);const n=t.paymentDetails||{},r=await T({settings:e,paymentDetails:n,billingData:y.billingData,successType:m.responseTypes.SUCCESS,errorType:m.responseTypes.ERROR,errorContext:m.noticeContexts.PAYMENTS});if(r.type!==m.responseTypes.SUCCESS&&(r.type!==m.responseTypes.ERROR||"invalid_status_for_operation"!==r.code))return l(!1),r;location.href=r.confirmUrl}));return()=>{t()}}),[w,m.noticeContexts.PAYMENTS,m.responseTypes.SUCCESS,m.responseTypes.ERROR]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"airwallex-checkout-loading-mask",style:{display:s?"block":"none"}}),(0,u.jsx)("div",{id:"airwallex-card",style:{display:n?"flex":"none",border:"1px solid var(--Border-decorative, rgba(232, 234, 237, 1))",background:"rgb(250, 250, 251)",padding:"0 16px",marginBottom:"6px",marginTop:"4px",minHeight:"40px",borderRadius:"4px",alignItems:"center",width:"400px"}}),(0,u.jsx)(p,{errorMessage:c})]})},A=e=>{const[t,n]=(0,v.useState)(!1),[r,a]=(0,v.useState)(!1),[i,s]=(0,v.useState)(3),{emitResponse:l,settings:c,billing:d,token:m}=e,{onCheckoutSuccess:y}=e.eventRegistration,p=(0,v.useRef)(null),x=e=>{n(e.detail.complete)};return(0,v.useEffect)((()=>{const{tokens:e}=c,t=e?.[m];a(t?.is_hide_cvc_element),s(["amex","american express"].includes(t?.type?.toLowerCase())?4:3)}),[m,c]),(0,v.useEffect)((()=>{let e,t={env:c.environment,locale:c.locale,origin:window.location.origin};return j(t).then((()=>{Airwallex.init(t),e=Airwallex.createElement("cvc",{style:{base:{fontSize:"14px","::placeholder":{color:"rgba(135, 142, 153, 1)"}}},placeholder:(0,o.__)("CVC","airwallex-online-payments-gateway"),cvcLength:i}),p.current=e,n(!1),e.mount("airwallex-cvc"),e.on("change",x)})),()=>{e&&e.destroy()}}),[i]),(0,v.useEffect)((()=>{const e=y((async({processingResponse:e})=>{const{tokens:n}=c,r=n?.[m];if(!awxEmbeddedCardData.isSkipCVCEnabled&&!t&&!r?.is_hide_cvc_element)return{type:l.responseTypes.ERROR,message:awxEmbeddedCardData.CVCIsNotCompletedMessage,messageContext:l.noticeContexts.PAYMENTS};const a=e.paymentDetails||{},o=await T({settings:c,paymentDetails:a,cvcElementRef:p,billingData:d.billingData,successType:l.responseTypes.SUCCESS,errorType:l.responseTypes.ERROR,errorContext:l.noticeContexts.PAYMENTS});if(o.type!==l.responseTypes.SUCCESS&&(o.type!==l.responseTypes.ERROR||"invalid_status_for_operation"!==o.code))return o;location.href=o.confirmUrl+"&token_id="+parseInt(m)}));return()=>e()}),[y,l.responseTypes.SUCCESS,l.responseTypes.ERROR,t,m]),(0,u.jsxs)("div",{style:{display:r?"none":"block"},children:[(0,u.jsx)("div",{className:"cvc-title",style:{marginBottom:"4px"},children:"Security code"}),(0,u.jsx)("div",{id:"airwallex-cvc",className:"cvc-container",style:{border:"1px solid var(--Border-decorative, rgba(232, 234, 237, 1))",background:"rgb(250, 250, 251)",padding:"0 16px",marginBottom:"18px",minHeight:"40px",borderRadius:"4px",display:"flex",alignItems:"center",width:"288px"}})]})};var L,O,B;const D=(0,a.getSetting)("airwallex_card_data",{}),U=D?.title||(0,o.__)("Card","airwallex-online-payments-gateway"),F=D?.description,q=null!==(L=D?.icons)&&void 0!==L?L:{},Y=(0,o.__)("Card information","airwallex-online-payments-gateway"),W=(0,o.__)("Save payment information to my account for future purchases","airwallex-online-payments-gateway"),H=e=>{const{PaymentMethodLabel:t}=e.components;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t,{text:U}),(0,u.jsx)("span",{style:{marginLeft:"auto",display:"flex",direction:"rtl"},children:Object.entries(q).map((([e,t])=>(0,u.jsx)("img",{src:t,alt:U,className:"airwallex-card-icon",style:{marginRight:"5px"}},e)))})]})},z=e=>{if(!1===D?.enabled)return null;return"inline"==D.checkout_form_type?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{color:"rgba(20, 23, 26, 1)"},children:Y}),F&&(0,u.jsx)("p",{children:F}),(0,u.jsx)($,{settings:D,props:e}),D.is_logged_in&&D.is_save_card_enabled&&!D.is_subscription&&(0,u.jsxs)("div",{className:"line save",children:[(0,u.jsx)("input",{type:"checkbox",id:"airwallex-save"}),(0,u.jsx)("label",{htmlFor:"airwallex-save",style:{color:"rgba(20, 23, 26, 1)",marginLeft:"6px"},children:W})]})]}):(0,u.jsx)("div",{children:F})},K={name:null!==(O=D?.name)&&void 0!==O?O:"airwallex_card",label:(0,u.jsx)(H,{}),content:(0,u.jsx)(z,{}),edit:(0,u.jsx)(z,{}),savedTokenComponent:(0,u.jsx)(A,{settings:D}),canMakePayment:()=>{var e;return null!==(e=D?.enabled)&&void 0!==e&&e},ariaLabel:U,supports:{features:null!==(B=D?.supports)&&void 0!==B?B:[]}};var V,Z,J,Q;const G=(0,a.getSetting)("airwallex_wechat_data",{}),X=null!==(V=G?.title)&&void 0!==V?V:(0,o.__)("WeChat Pay","airwallex-online-payments-gateway"),ee=null!==(Z=G?.description)&&void 0!==Z?Z:"",te=e=>{const{PaymentMethodLabel:t}=e.components;return(0,u.jsx)(t,{text:X})},ne=e=>(0,u.jsx)("div",{children:ee}),re={name:null!==(J=G?.name)&&void 0!==J?J:"airwallex_wechat",label:(0,u.jsx)(te,{}),content:(0,u.jsx)(ne,{}),edit:(0,u.jsx)(ne,{}),canMakePayment:()=>{var e;return null!==(e=G?.enabled)&&void 0!==e&&e},ariaLabel:X,supports:{features:null!==(Q=G?.supports)&&void 0!==Q?Q:[]}},ae=(0,o.__)("Express Checkout","airwallex-online-payments-gateway"),oe=e=>{const{PaymentMethodLabel:t}=e.components;return(0,u.jsx)(t,{text:ae})},ie=e=>(0,u.jsx)("div",{children:""}),se={name:"airwallex_express_checkout",label:(0,u.jsx)(oe,{}),content:(0,u.jsx)(ie,{}),edit:(0,u.jsx)(ie,{}),canMakePayment:()=>!1,ariaLabel:ae,supports:{features:[]}},le=window.wp.data,ce=window.wc.wcBlocksData,de=window.jQuery;var ue=n.n(de);const me=(e,t)=>t.ajaxUrl.toString().replace("%%endpoint%%","airwallex_"+e),ye=({title:e,icon:t,...n})=>{const{PaymentMethodLabel:r}=n.components,{url:a,alt:o}=t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r,{text:e}),(0,u.jsx)("img",{src:a,alt:o,style:{marginLeft:"auto",marginRight:"5px"}})]})},pe=({settings:e,description:t,CustomPaymentComponent:n=null,...r})=>{const{eventRegistration:a,emitResponse:i,billing:s,activePaymentMethod:l}=r,{LoadingMask:c}=r.components,{onCheckoutValidation:d,onPaymentSetup:m,onCheckoutFail:y}=a,{currency:p}=s,{paymentMethodName:x,paymentMethodDocURL:w}=e,{currencyIneligibleCWOff:g,currencyIneligibleCWOn:h}=e.textTemplate,{criticalIcon:_,infoIcon:f}=e.alterBoxIcons,[C,b]=(0,v.useState)(!1),[j,S]=(0,v.useState)(!1),[E,k]=(0,v.useState)(!1),[M,R]=(0,v.useState)(!1),[I,T]=(0,v.useState)(!1),[$,A]=(0,v.useState)(""),[L,O]=(0,v.useState)({}),[B,D]=(0,v.useState)(!1),U=(0,v.useRef)(!1),F=async t=>{let n=!1,r="",a="";W(!0),T(!0),await((e,t,n)=>ue().ajax({type:"POST",data:{payment_currency:e,target_currency:t,security:n?.nonce?.createQuoteCurrencySwitcher},url:me("currency_switcher_create_quote",n)}))(p.code,t,e).then((o=>{const{quote:i}=o;if(i){O(i),n=!0;const o={$$payment_method_name$$:x,$$original_currency$$:i.paymentCurrency,$$converted_currency$$:i.targetCurrency,$$conversion_rate$$:i.clientRate,$$converted_amount$$:i.targetAmount};r=N(e?.textTemplate?.conversionRate,o),a=N(e?.textTemplate?.convertedAmount,o),q({paymentMethodName:x,conversionRate:r,convertedAmount:a,requiredCurrency:t,baseAmount:i.paymentAmount}),R(!0),k(!1),W(!1)}else n=!1,r="",a="",R(!1),k(!0),W(!0)})).catch((e=>{R(!1),k(!0),console.error(e)})),T(!1),W(!1),document.getElementById("wc-block-airwallex-currency-switching-convert-rate").innerHTML=r,document.getElementById("wc-block-airwallex-currency-switching-converted-amount").innerHTML=a,document.getElementById("wc-block-airwallex-currency-switching-container").style.display=n?"flex":"none"},q=({paymentMethodName:e,conversionRate:t,convertedAmount:n,requiredCurrency:r,baseAmount:a})=>{try{document.getElementById("wc-airwallex-quote-expire-convert-text").innerHTML=N(h,{$$payment_method_name$$:e,$$original_currency$$:p.code,$$converted_currency$$:r}),document.getElementById("wc-airwallex-currency-switching-base-amount").innerHTML=a,document.getElementById("wc-airwallex-currency-switching-conversion-rate").innerHTML=t,document.getElementById("wc-airwallex-currency-switching-converted-amount").innerHTML=n}catch(e){console.warn(e)}},Y=()=>{try{document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire")[0].style.display="none",document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-mask")[0].style.display="none"}catch(e){console.warn(e)}},W=function(e){try{document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-place-order-mask")[0].style.display=e?"block":"none"}catch(e){console.warn(e)}};return(0,v.useEffect)((()=>{const t=document.getElementById("wc-block-airwallex-currency-switching-container");t&&(t.style.display="none"),"function"==typeof r.handleCurrencySwitching&&r.handleCurrencySwitching({country:s.billingAddress.country,currency:p,settings:e,paymentMethod:l,updateCurrencySwitchingInfo:F,setShowEntityIneligible:b,setShowCountryIneligible:S,setShowCurrencyIneligibleCWOff:k,setShowCurrencyIneligibleCWOn:R,setConvertCurrency:A,setShowCustomPaymentComponent:D});try{document.getElementById("wc-airwallex-quote-expire-confirm").innerHTML=document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0]?.innerText}catch(e){console.warn(e)}}),[s.billingAddress.country,s.cartTotal.value]),(0,v.useEffect)((()=>{const e=d((()=>(U.current=!1,C?{context:i.noticeContexts.PAYMENTS,errorMessage:(0,o.__)("Invalid merchant entity.","airwallex-online-payments-gateway")}:j||E?{context:i.noticeContexts.PAYMENTS,errorMessage:(0,o.__)("Please use a different payment method.","airwallex-online-payments-gateway")}:0===Object.keys(L).length||(!!(L&&L.refreshAt&&new Date(L.refreshAt).getTime()>=(new Date).getTime())||(F($),(()=>{try{document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire")[0].style.display="block",document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-mask")[0].style.display="block"}catch(e){console.warn(e)}})(),new Promise(((e,t)=>{const n=document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-close")[0],r=document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-place-back")[0],a=document.getElementsByClassName("wc-airwallex-currency-switching-quote-expire-place-order")[0];n&&r&&a||(console.warn("Quote expire pop up modal not found."),e(!1)),n.onclick=()=>{Y(),U.current=!0,e({context:i.noticeContexts.PAYMENTS,errorMessage:(0,o.__)("Payment aborted.","airwallex-online-payments-gateway")})},r.onclick=()=>{Y(),U.current=!0,e({context:i.noticeContexts.PAYMENTS,errorMessage:(0,o.__)("Payment aborted.","airwallex-online-payments-gateway")})},a.onclick=()=>{Y(),e(!0)}})))))));return()=>{e()}}),[C,j,E,L,$,d]),(0,v.useEffect)((()=>{const e=m((async()=>{const e=(e=>{const{navigator:t,screen:n}=window||{},{language:r,userAgent:a}=t||{},{colorDepth:o,height:i,width:s}=n||{};return{device_id:e,screen_height:i,screen_width:s,screen_color_depth:o,language:r,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:t?.javaEnabled(),javascript_enabled:!0,user_agent:a}}})(document.getElementById("airwallex-fraud-api")?.getAttribute("data-order-session-id"));return{type:i.responseTypes.SUCCESS,meta:{paymentMethodData:{is_payment_aborted:U.current?"true":"false",airwallex_device_data:JSON.stringify(e),airwallex_target_currency:$,airwallex_browser_language:P()}}}}));return()=>{e()}}),[e,$,m,i.responseTypes.SUCCESS]),(0,v.useEffect)((()=>{const e=y((({processingResponse:e})=>!e?.paymentDetails?.message||{type:i.responseTypes.ERROR,message:e.paymentDetails.message,messageContext:i.noticeContexts.PAYMENTS}));return()=>{e()}}),[y,i.noticeContexts.PAYMENTS,i.responseTypes.ERROR]),(0,u.jsx)("div",{children:(0,u.jsxs)(c,{isLoading:I,screenReaderLabel:(0,o.__)("Loading currency switching detail…","airwallex-online-payments-gateway"),children:[t,(0,u.jsx)("span",{style:{display:I?"inline-block":"none"},className:"wc-airwallex-loader"}),(0,u.jsx)(we,{shouldDisplay:C,icon:_}),(0,u.jsx)(ge,{shouldDisplay:j,methodName:x,docUrl:w,icon:_,test:I}),n&&B&&(0,u.jsx)(n,{paymentMethod:l,currency:p,setConvertCurrency:A,setShowCurrencyIneligibleCWOn:R,updateCurrencySwitchingInfo:F,disablePlaceOrderButton:function(e){try{e?document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].setAttribute("disabled","disabled"):document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].removeAttribute("disabled")}catch(e){console.warn(e)}}}),(0,u.jsx)(he,{shouldDisplay:E,text:N(g,{$$payment_method_name$$:x,$$original_currency$$:p.code}),icon:_}),(0,u.jsx)(ve,{shouldDisplay:M,text:N(h,{$$payment_method_name$$:x,$$original_currency$$:p.code,$$converted_currency$$:$}),icon:f})]})})},xe=({description:e,...t})=>(0,u.jsx)("div",{children:e}),we=({icon:e,shouldDisplay:t})=>(0,u.jsxs)("div",{style:{display:t?"flex":"none"},className:"wc-airwallex-alert-box wc-airwallex-error",children:[(0,u.jsx)("img",{src:e}),(0,u.jsx)("div",{children:(0,o.__)("Invalid merchant entity.","airwallex-online-payments-gateway")})]}),ge=({methodName:e,docUrl:t,icon:n,shouldDisplay:r,test:a})=>(0,u.jsxs)("div",{style:{display:r?"flex":"none"},className:"wc-airwallex-alert-box wc-airwallex-error",children:[(0,u.jsx)("img",{src:n}),(0,u.jsxs)("div",{children:[e,(0,o.__)(" is not available in your country. Please change your billing address to a ","airwallex-online-payments-gateway"),(0,u.jsx)("a",{href:t,target:"_blank",children:(0,o.__)("compatible country","airwallex-online-payments-gateway")}),(0,o.__)(" or choose a different payment method.","airwallex-online-payments-gateway")]})]}),he=({text:e,icon:t,shouldDisplay:n})=>(0,u.jsxs)("div",{style:{display:n?"flex":"none"},className:"wc-airwallex-alert-box wc-airwallex-error",children:[(0,u.jsx)("img",{src:t}),(0,u.jsx)("div",{children:e})]}),ve=({text:e,icon:t,shouldDisplay:n})=>(0,u.jsxs)("div",{style:{display:n?"flex":"none"},className:"wc-airwallex-alert-box wc-airwallex-info",children:[(0,u.jsx)("img",{src:t}),(0,u.jsx)("div",{children:e})]});var _e,fe,Ce,be,je;const Se=(0,a.getSetting)("airwallex_klarna_data",{}),Ee=null!==(_e=Se.icon)&&void 0!==_e?_e:{},ke=null!==(fe=Se?.title)&&void 0!==fe?fe:(0,o.__)("Klarna","airwallex-online-payments-gateway"),Me=null!==(Ce=Se?.description)&&void 0!==Ce?Ce:"",Re={name:null!==(be=Se?.name)&&void 0!==be?be:"airwallex_klarna",label:(0,u.jsx)(ye,{title:ke,icon:Ee}),content:(0,u.jsx)(pe,{settings:Se,description:Me,paymentMethodName:ke,handleCurrencySwitching:({country:e,currency:t,settings:n,paymentMethod:r,updateCurrencySwitchingInfo:a,setShowEntityIneligible:o,setShowCountryIneligible:i,setShowCurrencyIneligibleCWOff:s,setShowCurrencyIneligibleCWOn:l,setConvertCurrency:c})=>{if(!n[r])return;const{availableCurrencies:d}=n,{supportedCountryCurrency:u}=n[r];if(u&&e in u){const n=u[e];return c(n),void(t.code===n?(i(!1),s(!1),l(!1)):d&&d.includes(n)?(a(n),i(!1)):(i(!1),s(!0),l(!1)))}i(!0),s(!1),l(!1)}}),edit:(0,u.jsx)(xe,{description:Me}),canMakePayment:()=>{var e;return null!==(e=Se?.enabled)&&void 0!==e&&e},ariaLabel:ke,supports:{features:null!==(je=Se?.supports)&&void 0!==je?je:[]}};var Ie,Ne,Pe,Te,$e;const Ae=(0,a.getSetting)("airwallex_afterpay_data",{}),Le=null!==(Ie=Ae.icon)&&void 0!==Ie?Ie:{},Oe=null!==(Ne=Ae?.title)&&void 0!==Ne?Ne:(0,o.__)("Afterpay","airwallex-online-payments-gateway"),Be=null!==(Pe=Ae?.description)&&void 0!==Pe?Pe:"",De=[{code:"US",name:"United States"},{code:"AU",name:"Australia"},{code:"NZ",name:"New Zealand"},{code:"GB",name:"United Kingdom"},{code:"CA",name:"Canada"}],Ue="airwallex_afterpay_country",Fe=function(e,t,n,r,a){const o=localStorage.getItem(Ue)||"";if(!o)return!1;const i=e?.[o];if(!i)return!1;if(t(i),n!==i)r(i),a(!0);else{const e=document.getElementById("wc-block-airwallex-currency-switching-container");e&&(e.style.display="none"),a(!1)}return!0},qe={name:null!==(Te=Ae?.name)&&void 0!==Te?Te:"airwallex_afterpay",label:(0,u.jsx)(ye,{title:Oe,icon:Le}),content:(0,u.jsx)(pe,{settings:Ae,description:Be,paymentMethodName:Oe,handleCurrencySwitching:({country:e,currency:t,settings:n,paymentMethod:r,updateCurrencySwitchingInfo:a,setShowEntityIneligible:o,setShowCountryIneligible:i,setShowCurrencyIneligibleCWOff:s,setShowCurrencyIneligibleCWOn:l,setConvertCurrency:c,setShowCustomPaymentComponent:d})=>{if(!n[r])return;const{availableCurrencies:u,owningEntity:m}=n,{supportedCountryCurrency:y,supportedEntityCurrencies:p}=n[r],x=t.code,w=e;d(!1),o(!1),i(!1),s(!1),l(!1);const g=p?.[m];if(!g)return o(!0),!1;if((!u||!u.length)&&g.includes(x))return!0;const h=y?.[w];if(g.includes(x)&&("AIRWALLEX_HK"!==m||h===x))return!0;let v;return h&&(v=h,g.includes(v)||(v="")),v||1!==g.length||(v=g[0]),v?(c(v),a(v),l(!0),!0):(d(!0),Fe(y,c,x,a,l))},CustomPaymentComponent:({paymentMethod:e,currency:t,setConvertCurrency:n,setShowCurrencyIneligibleCWOn:r,updateCurrencySwitchingInfo:a,disablePlaceOrderButton:i})=>{const{supportedCountryCurrency:s}=Ae[e],[l,c]=(0,v.useState)((()=>localStorage.getItem(Ue)||"")),[d,m]=(0,v.useState)(!1);(0,v.useEffect)((()=>{Fe(s,n,t.code,a,r)}),[l]);return(0,u.jsxs)("div",{className:"wc-airwallex-afterpay-supported-countries-form",children:[(0,u.jsx)("div",{className:"awx-choose-afterpay-region-title",children:(0,o.__)("Choose your Afterpay account region","airwallex-online-payments-gateway")}),(0,u.jsx)("div",{style:{margin:"10px 0"},children:(0,o.__)("If you don’t have an account yet, choose the region that you will create your account from.","airwallex-online-payments-gateway")}),(0,u.jsxs)("div",{className:"awx-afterpay-countries",children:[(0,u.jsx)("div",{className:"input-icon",onClick:()=>m(!d),children:(0,u.jsx)("img",{src:Ae?.alterBoxIcons?.selectArrowIcon,alt:"arrow"})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{readOnly:!0,type:"text",placeholder:(0,o.__)("Afterpay account region","airwallex-online-payments-gateway"),value:l?De.find((e=>e.code===l))?.name:"",onFocus:()=>m(!0),onBlur:()=>setTimeout((()=>m(!1)),200)})}),d&&(0,u.jsx)("div",{className:"countries",children:(0,u.jsx)("ul",{children:De.map((e=>(0,u.jsx)("li",{"data-value":e.code,className:l===e.code?"selected":"",onClick:()=>{return t=e.code,c(t),localStorage.setItem(Ue,t),m(!1),void i(!1);var t},children:e.name},e.code)))})})]})]})}}),edit:(0,u.jsx)(xe,{description:Be}),canMakePayment:()=>{var e;return null!==(e=Ae?.enabled)&&void 0!==e&&e},ariaLabel:Oe,supports:{features:null!==($e=Ae?.supports)&&void 0!==$e?$e:[]}},Ye=window.wp.plugins,We=window.wc.blocksCheckout;(0,r.registerPaymentMethod)(h),(0,r.registerPaymentMethod)(K),(0,r.registerPaymentMethod)(re),(0,r.registerPaymentMethod)(se),(0,r.registerPaymentMethod)(Re),(0,r.registerPaymentMethod)(qe);const He=({cart:e,extensions:t})=>(0,u.jsxs)("div",{id:"wc-block-airwallex-currency-switching-container",style:{display:"none"},children:[(0,u.jsx)("div",{style:{padding:"16px",flexGrow:"1"},children:(0,o.__)("You Pay","airwallex-online-payments-gateway")}),(0,u.jsxs)("div",{className:"wc-airwallex-currency-switching-container",children:[(0,u.jsxs)("div",{className:"wc-airwallex-currency-switching-conversion-rate",children:[(0,u.jsxs)("div",{className:"wc-airwallex-currency-switching-convert-icon",children:[(0,u.jsx)("div",{className:"wc-airwallex-currency-switching-convert-icon-line",children:(0,u.jsx)("div",{})}),(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8751 6.00603C11.2227 5.84685 11.641 5.97553 11.836 6.31338C12.0431 6.6721 11.9202 7.13079 11.5615 7.33789L9.93769 8.27539C9.57897 8.4825 9.12028 8.3596 8.91317 8.00088L7.97567 6.37708C7.76857 6.01836 7.89147 5.55967 8.25019 5.35256C8.60891 5.14545 9.0676 5.26836 9.27471 5.62708L9.36849 5.78951C9.25886 4.02452 7.79267 2.62695 6.00007 2.62695C5.0122 2.62695 4.12347 3.05137 3.50626 3.72782L2.44482 2.66638C3.33417 1.71884 4.598 1.12695 6.00007 1.12695C8.69245 1.12695 10.8751 3.30957 10.8751 6.00195C10.8751 6.00331 10.8751 6.00467 10.8751 6.00603ZM1.12576 6.08873L1.12513 6.0891C0.766406 6.2962 0.307713 6.1733 0.100606 5.81458C-0.106501 5.45586 0.0164058 4.99717 0.375125 4.79006L1.99892 3.85256C2.35764 3.64545 2.81633 3.76836 3.02344 4.12708L3.96094 5.75088C4.16805 6.1096 4.04514 6.56829 3.68642 6.77539C3.3277 6.9825 2.86901 6.8596 2.6619 6.50088L2.66152 6.50022C2.90238 8.12792 4.30533 9.37695 6 9.37695C6.85293 9.37695 7.63196 9.06056 8.22613 8.53874L9.28834 9.60095C8.42141 10.3935 7.26716 10.877 6 10.877C3.3366 10.877 1.17206 8.74108 1.12576 6.08873Z",fill:"#B0B6BF"})}),(0,u.jsx)("div",{className:"wc-airwallex-currency-switching-convert-icon-line",children:(0,u.jsx)("div",{})})]}),(0,u.jsx)("div",{id:"wc-block-airwallex-currency-switching-convert-rate",className:"wc-airwallex-currency-switching-convert-text"})]}),(0,u.jsx)("div",{id:"wc-block-airwallex-currency-switching-converted-amount",className:"wc-airwallex-currency-switching-converted-amount"})]})]});(0,Ye.registerPlugin)("airwallex-lpm",{render:()=>(0,u.jsx)(We.ExperimentalOrderMeta,{children:(0,u.jsx)(He,{})}),scope:"woocommerce-checkout"}),window.addEventListener("change",(e=>{"radio-control-wc-payment-method-options"!==e?.target?.name||["airwallex_klarna","airwallex_afterpay"].includes((0,le.select)(ce.PAYMENT_STORE_KEY).getActivePaymentMethod())||(document.getElementById("wc-block-airwallex-currency-switching-container").style.display="none")}))})();