(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};let r={sessionId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)}))};const n=e=>{const{navigator:r,screen:n}=window||{},{language:t,userAgent:a}=r||{},{colorDepth:c,height:i,width:o}=n||{};return{device_id:e,screen_height:i,screen_width:o,screen_color_depth:c,language:t,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:r?.javaEnabled(),javascript_enabled:!0,user_agent:a}}},t=()=>{const e=navigator.language||navigator.userLanguage,r=e.split("-")[0];return"zh"!==r||"zh-HK"!==e&&"zh-TW"!==e?r:"zh-HK"},a=window.jQuery;var c=e.n(a);const i=e=>awxEmbeddedLPMData.ajaxUrl.toString().replace("%%endpoint%%","airwallex_"+e);jQuery((function(e){let a="",o="",l={},u=!1;const d=function(r,n){u=!0,g(!0),_(!0),w(),((e,r)=>c().ajax({type:"POST",data:{payment_currency:e,target_currency:r,security:awxEmbeddedLPMData.nonce.createQuoteCurrencySwitcher},url:i("currency_switcher_create_quote")}))(r,n).done((function(t){const{quote:a}=t,{currencyIneligibleCWOff:c,currencyIneligibleCWOn:i,conversionRate:o,convertedAmount:u}=awxEmbeddedLPMData.textTemplate;if(a){l=a;const n={$$original_currency$$:r,$$conversion_rate$$:a.clientRate,$$converted_currency$$:a.targetCurrency,$$converted_amount$$:a.targetAmount};e(".wc-airwallex-currency-switching-base-amount").html(a.paymentAmount),e(".wc-airwallex-currency-switching-convert-text").html("").append(m(o,n)),e(".wc-airwallex-currency-switching-converted-amount").html("").append(m(u,n)),e(".wc-airwallex-currency-switching-quote-expire-convert-text").html("").append(m(i,n)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on div").html(m(i,n)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on").show(),s(),g(!1),_(!1)}else{p();const t={$$original_currency$$:r,$$converted_currency$$:n};e(".woocommerce-checkout .wc-airwallex-alert-box").hide(),e(".wc-airwallex-lpm-currency-ineligible-switcher-off div").html(m(c,t)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show(),g(!0)}})).fail((function(e){p()})).always((function(){u=!1,x()}))},w=function(){e(".wc-airwallex-loader").show()},x=function(){e(".wc-airwallex-loader").hide()},s=function(){e(".wc-airwallex-currency-switching").show()},p=function(){e(".wc-airwallex-currency-switching").hide()},m=function(e,r){for(const n in r)e=e.replace(n,r[n]);return e},h=function(){return e("#billing_country").val()},y=function(){const r=e('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");return r?r.replace("payment_method_",""):""},g=function(r){e(".woocommerce-checkout #place_order").prop("disabled",r)},_=function(r){r?e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").show():e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").hide()},f=function(){e(document.body).on("country_to_state_changed payment_method_selected updated_checkout",(function(){p(),e(".woocommerce-checkout .wc-airwallex-alert-box").hide();const r=function(){let r=!0;const n=h(),t=y();if(t in awxEmbeddedLPMData){const{availableCurrencies:c}=awxEmbeddedLPMData,{supportedCountryCurrency:i}=awxEmbeddedLPMData[t],{currencyIneligibleCWOff:l}=awxEmbeddedLPMData.textTemplate;if(n in i){o=i[n];const t={$$original_currency$$:a,$$converted_currency$$:o};a===o||(c&&c.includes(o)?d(a,o):(r=!1,e(".wc-airwallex-lpm-currency-ineligible-switcher-off div").html(m(l,t)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show()))}else r=!1,e(".wc-airwallex-lpm-country-ineligible").show()}return r}();g(!r||u)})),e("form.woocommerce-checkout").on("checkout_place_order",(function(a,c){var i;return y()in awxEmbeddedLPMData&&(i=c?c.$checkout_form:"form.checkout",e("<input>").prop({type:"hidden",id:"airwallex_device_data",name:"airwallex_device_data",value:JSON.stringify(n(r.sessionId))}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_origin",name:"airwallex_origin",value:window.location.origin}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_target_currency",name:"airwallex_target_currency",value:o}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_browser_language",name:"airwallex_browser_language",value:t()}).appendTo(i)),!0}))};if(awxEmbeddedLPMData&&awxCommonData){const{env:r,locale:n}=awxCommonData;((e,r,n)=>{const t=setInterval((()=>{window.Airwallex&&(clearInterval(t),Airwallex.init({env:e,locale:r,origin:window.location.origin}),n())}),1e3)})(r,n,(()=>{})),c().ajax({type:"GET",data:{security:awxEmbeddedLPMData.nonce.getStoreCurrency},url:i("get_store_currency")}).done((function(e){a=e.currency,f()})),e("#wc-airwallex-quote-expire-confirm").text(e("#place_order").text())}}))})();