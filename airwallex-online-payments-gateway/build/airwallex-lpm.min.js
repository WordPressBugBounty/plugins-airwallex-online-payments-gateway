(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var a in n)e.o(n,a)&&!e.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:n[a]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)}));const r=e=>{const{navigator:r,screen:n}=window||{},{language:a,userAgent:t}=r||{},{colorDepth:i,height:c,width:o}=n||{};return{device_id:e,screen_height:c,screen_width:o,screen_color_depth:i,language:a,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:r?.javaEnabled(),javascript_enabled:!0,user_agent:t}}},n=()=>{const e=navigator.language||navigator.userLanguage,r=e.split("-")[0];return"zh"!==r||"zh-HK"!==e&&"zh-TW"!==e?r:"zh-HK"},a=window.jQuery;var t=e.n(a);const i=e=>awxEmbeddedLPMData.ajaxUrl.toString().replace("%%endpoint%%","airwallex_"+e);function c({awxEmbeddedLPMData:e,originalCurrency:r,setRequiredCurrency:n,displayCurrencySwitchingInfo:a,displayCurrencyIneligibleInfo:t}){const i=e?.paymentMethodNames?.Klarna,c=jQuery,o=c("#billing_country").val(),{supportedCountryCurrency:l}=e.airwallex_klarna||{},{availableCurrencies:u}=e;let d=l?.[o];return d?(n(d),r===d||(u?.includes(d)?(a(i,r,d),!0):(t(i,r),!1))):(c(".wc-airwallex-lpm-country-ineligible").show(),!1)}function o({awxEmbeddedLPMData:e,originalCurrency:r,setRequiredCurrency:n,displayCurrencySwitchingInfo:a,displayCurrencyIneligibleInfo:t}){const i=e?.paymentMethodNames?.Afterpay,c=jQuery,o=c("#billing_country").val(),{supportedCountryCurrency:l,supportedEntityCurrencies:u}=e?.airwallex_afterpay||{},{availableCurrencies:d,owningEntity:w}=e;c(".wc-airwallex-afterpay-supported-countries-form").hide();const s=u?.[w];if(!s)return c(".wc-airwallex-lpm-entity-ineligible").show(),!1;if((!d||!d.length)&&s.includes(r))return!0;if(!d||!d.length||!d.includes(r))return t(i,r),!1;const x=l?.[o];if(d&&d.includes(r)&&("AIRWALLEX_HK"!==w||x===r))return!0;let p;if(x&&(p=x,s.includes(p)||(p="")),p||1!==s.length||(p=s[0]),p)return n(p),a(i,r,p),!0;const y="airwallex_afterpay_country",m=localStorage.getItem(y);c(".wc-airwallex-afterpay-supported-countries-form").show();const h=c(".awx-afterpay-countries li"),f=c(".awx-afterpay-countries input");h.each((function(){c(this).data("value")===m&&f.val(c(this).html())}));const g=function(){c(".awx-afterpay-countries .countries").fadeIn(300);const e=localStorage.getItem(y);e&&c(".awx-afterpay-countries li").each((function(){c(this).removeClass("selected"),c(this).data("value")===e&&c(this).addClass("selected")}))};f.off("focus").on("focus",g),c(".awx-afterpay-countries .input-icon").off("click").on("click",g),f.off("blur").on("blur",(function(){c(".awx-afterpay-countries .countries").fadeOut(300)}));const _=function(e,r,t){n(t),r!==t?a(e,r,t):(c(".wc-airwallex-currency-switching").hide(),c(".woocommerce-checkout .wc-airwallex-alert-box").hide())};return h.off("click").on("click",(function(){localStorage.setItem(y,c(this).data("value")),c(".wc-airwallex-afterpay-supported-countries-form input").val(c(this).html()),p=l?.[c(this).data("value")],_(i,r,p)})),p=l[m],!!p&&(_(i,r,p),!0)}jQuery((function(e){let a="",l="",u={},d=!1;const w={airwallex_klarna:c,airwallex_afterpay:o},s=function(r,n){const{currencyIneligibleCWOff:a}=awxEmbeddedLPMData.textTemplate,t={$$payment_method_name$$:r,$$original_currency$$:n};e(".wc-airwallex-lpm-currency-ineligible-switcher-off .wc-airwallex-alert-box-content").html(f(a,t)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show()},x=function(r,n,a){d=!0,_(!0),b(!0),p(),((e,r)=>t().ajax({type:"POST",data:{payment_currency:e,target_currency:r,security:awxEmbeddedLPMData.nonce.createQuoteCurrencySwitcher},url:i("currency_switcher_create_quote")}))(n,a).done((function(t){const{quote:i}=t,{currencyIneligibleCWOff:c,currencyIneligibleCWOn:o,conversionRate:l,convertedAmount:d}=awxEmbeddedLPMData.textTemplate;if(i){u=i;const a={$$payment_method_name$$:r,$$original_currency$$:n,$$conversion_rate$$:i.clientRate,$$converted_currency$$:i.targetCurrency,$$converted_amount$$:i.targetAmount};e(".wc-airwallex-currency-switching-base-amount").html(i.paymentAmount),e(".wc-airwallex-currency-switching-convert-text").html("").append(f(l,a)),e(".wc-airwallex-currency-switching-converted-amount").html("").append(f(d,a)),e(".wc-airwallex-currency-switching-quote-expire-convert-text").html("").append(f(o,a)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on .wc-airwallex-alert-box-content").html(f(o,a)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on").show(),m(),_(!1),b(!1)}else{h();const t={$$payment_method_name$$:r,$$original_currency$$:n,$$converted_currency$$:a};e(".woocommerce-checkout .wc-airwallex-alert-box").hide(),e(".wc-airwallex-lpm-currency-ineligible-switcher-off .wc-airwallex-alert-box-content").html(f(c,t)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show(),_(!0)}})).fail((function(e){h()})).always((function(){d=!1,y()}))},p=function(){e(".wc-airwallex-loader").show()},y=function(){e(".wc-airwallex-loader").hide()},m=function(){e(".wc-airwallex-currency-switching").show()},h=function(){e(".wc-airwallex-currency-switching").hide()},f=function(e,r){for(const n in r)e=e.split(n).join(r[n]);return e},g=function(){const r=e('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");return r?r.replace("payment_method_",""):""},_=function(r){e(".woocommerce-checkout #place_order").prop("disabled",r)},b=function(r){r?e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").show():e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").hide()},v=function(){e(document.body).on("country_to_state_changed payment_method_selected updated_checkout",(function(){h(),e(".woocommerce-checkout .wc-airwallex-alert-box").hide();const r=function(){const e=g(),r=w[e];return!r||r({awxEmbeddedLPMData,originalCurrency:a,setRequiredCurrency:e=>l=e,displayCurrencySwitchingInfo:x,displayCurrencyIneligibleInfo:s})}();_(!r||d)})),e("form.woocommerce-checkout").on("checkout_place_order",(function(a,t){var i;return g()in awxEmbeddedLPMData&&(i=t?t.$checkout_form:"form.checkout",e("<input>").prop({type:"hidden",id:"airwallex_device_data",name:"airwallex_device_data",value:JSON.stringify(r(document.getElementById("airwallex-fraud-api")?.getAttribute("data-order-session-id")))}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_origin",name:"airwallex_origin",value:window.location.origin}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_target_currency",name:"airwallex_target_currency",value:l}).appendTo(i),e("<input>").prop({type:"hidden",id:"airwallex_browser_language",name:"airwallex_browser_language",value:n()}).appendTo(i)),!0}))};if(awxEmbeddedLPMData&&awxCommonData){const{env:r,locale:n}=awxCommonData;((e,r,n)=>{const a=setInterval((()=>{window.Airwallex&&(clearInterval(a),Airwallex.init({env:e,locale:r,origin:window.location.origin}),n())}),1e3)})(r,n,(()=>{})),a=awxEmbeddedLPMData.originalCurrency,v(),e("#wc-airwallex-quote-expire-confirm").text(e("#place_order").text())}}))})();